---
title: Quickstart
description: Issue your first refund in under a minute
---

## Prerequisites

- The Solara Retail API running at `http://localhost:9000`
- `API_KEY` set in your `.env` file (default for local dev: `SOLARA-SECRET-2026`)

## Steps

<Steps>
  <Step>
    ### Browse available transactions

    ```bash
    curl http://localhost:9000/api/v1/transactions \
      -H "X-API-Key: SOLARA-SECRET-2026"
    ```
  </Step>

  <Step>
    ### Issue a full refund

    Omit `item_ids` to refund the full transaction amount.

    ```bash
    curl -X POST http://localhost:9000/api/v1/refunds \
      -H "X-API-Key: SOLARA-SECRET-2026" \
      -H "Content-Type: application/json" \
      -d '{
        "transaction_id": "TXN-REG-001",
        "operator_id": "op1",
        "reason": "customer request"
      }'
    ```

    The response includes a `calculation_breakdown` showing which scenario was applied
    and how amounts were distributed across payment methods.
  </Step>

  <Step>
    ### Verify the audit trail

    ```bash
    curl "http://localhost:9000/api/v1/audit?transaction_id=TXN-REG-001" \
      -H "X-API-Key: SOLARA-SECRET-2026"
    ```

    You'll see two events: `REFUND_REQUESTED` and `REFUND_APPROVED`.
  </Step>
</Steps>

## Partial refund (item subset)

Supply `item_ids` to refund only specific items. Tax and shipping are refunded proportionally.

```bash
curl -X POST http://localhost:9000/api/v1/refunds \
  -H "X-API-Key: SOLARA-SECRET-2026" \
  -H "Content-Type: application/json" \
  -d '{
    "transaction_id": "TXN-REG-010",
    "item_ids": ["ITEM-REG-010-A"],
    "operator_id": "op2",
    "reason": "wrong size"
  }'
```

See [Scenario C](/docs/scenarios/scenario-c) for the full formula.

## Safe retries with idempotency

Add an `Idempotency-Key` header to prevent duplicate refunds on network retries:

```bash
curl -X POST http://localhost:9000/api/v1/refunds \
  -H "X-API-Key: SOLARA-SECRET-2026" \
  -H "Content-Type: application/json" \
  -H "Idempotency-Key: refund-req-20260225-001" \
  -d '{
    "transaction_id": "TXN-REG-001",
    "operator_id": "op1",
    "reason": "customer request"
  }'
```

If the same `Idempotency-Key` is sent again, the API returns the original refund with HTTP `200` and the header `Idempotent-Replayed: true` â€” no double-processing occurs.
